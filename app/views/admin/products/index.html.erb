<section class="single-page-title">
  <div class="container">
    <div class="row">
      <div class="col-md-7">
        <h2>Products</h2>
      </div>
      <div class="col-md-5 align-self-center">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><%= link_to "Admin", admin_path %></li>
            <li class="breadcrumb-item active" aria-current="page">Products</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</section>

<section class="admin-section-content">
  <div class="container">
    <div class="row">
      <div class="col-sm-12 admin-products">
        <%= render :partial => "shared/flash" %>
        <div class="row">
          <div class="col-sm-3">
            <p><%= link_to "Add new product", new_admin_product_path, class: "btn btn-primary" %></p>
          </div>
          <div class="col-sm-9">
          </div>
        </div>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Category</th>
              <th>Sauces</th>
              <th>Description</th>
              <th>&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            <% @products.each_with_index do |product, x| %>
              <tr>
                <th scope="row"><%= @no+x+1 %></th>
                <td><%= product.name %></td>
                <td><%= product.category.try(:name) %></td>
                <td>
                  <% product.sauces.each do |sauce| %>
                    - <%= link_to sauce.name, edit_admin_sauce_path(sauce.id) %><br />
                  <% end %>
                </td>
                <td><%= raw(simple_format(product.description))%></td>
                <td>
                  <%= link_to "Edit", edit_admin_product_path(product.id, :page => params[:page]), 
                              :class => "btn btn-success" %>
                  <%= link_to "Delete", admin_product_path(product.id, :page => params[:page] ), 
                              :method => :delete, data: {:confirm => "Are you sure?"}, 
                              :class => "btn btn-danger" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>

        <div class="col-xs-12 pagination justify-content-center"><%= paginate @products %></div>
      </div>
    </div>
  </div>
</section>

